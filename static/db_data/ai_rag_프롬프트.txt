이 소스코드를 이용해서 다음 질문에 대해 가장 적합한 방법으로 리팩토링 해줘. 

1. 파이썬 3.12.7 버전으로 AI chatbot, 이미지생성, 비디오생성 시스템 구현 

2. fastapi, asyncio 최신버전으로 코드 구성

3. 40GB vram 그리고 vram 추가 확장성 고려

4. 10명 정도의 동시 사용자 

5. sse를 이용한 api 서버로 만들계획 

6. langchain 0.3 최신버전과 langchain-chatollama 활용 

7. text-to-image 및 text-to-video 모델 추가 확장성 고려

8. 모델 객체는 공유방식을 할지 싱글톤 방식을 할지에 대해 가장 적합한 방식을 사용해줘

9. RAG 시스템 확장을 위한 방식도 고려해줘. 

10. 채팅 및 이미지, 비디오 대화 이력은 postgresql DB에 저장할꺼야

11. 원활한 서비스 제공을 위한 코딩 전략 부탁해. 그리고 전체 프로젝트 폴더 구조 및 소스 코드 제공해줘

12. 시스템 성능과 코드 가독성, 유지보수성 고려해서 작성 부탁해